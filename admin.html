<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>User Admin Page</title>
  <script type="module">
    // Import Firebase SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/11.3.0/firebase-auth.js";

    // Your Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCIXtcjkj6kLTqwStdD7RtMCuiycrKBH0k",
      authDomain: "fitnessapp-f519f.firebaseapp.com",
      projectId: "fitnessapp-f519f",
      storageBucket: "fitnessapp-f519f.appspot.com",
      messagingSenderId: "1000735476286",
      appId: "1:1000735476286:web:4a62a875917834dd215f6f",
      measurementId: "G-MJ8K8ZNQM4"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Function to handle user sign out
    function logoutUser() {
      signOut(auth)
        .then(() => {
          console.log('User logged out');
          window.location.href = 'login.html';  // Redirect to login page after logout
        })
        .catch((error) => {
          console.error('Error logging out user:', error);
          document.getElementById('status').textContent = 'Error logging out: ' + error.message;
        });
    }

    // Check if user is authenticated and show admin page content
    window.onload = function () {
      onAuthStateChanged(auth, (user) => {
        if (user) {
          console.log('User is logged in:', user);
          // Show user info
          document.getElementById('welcomeMessage').textContent = `Welcome, ${user.email}`;
          document.getElementById('logoutBtn').style.display = 'block';  // Show logout button
          
          // Here you can load additional data like workout history, etc.
          document.getElementById('workoutHistory').style.display = 'block';  // Placeholder for workout history

        } else {
          // If no user is logged in, redirect to login page
          window.location.href = 'login.html';
        }
      });
    };
  </script>
</head>
<body>
      <header>
        <h1>Фитнес-трекер</h1>
        <nav>
            <ul>
                <li><a href="#" onclick="showSection('workouts')">Тренировки</a></li>
                <li><a href="#" onclick="showSection('calendar')">Календарь</a></li>
                <li><a href="#" onclick="showSection('plans')">Программы</a></li>
                <li><a href="#" onclick="showSection('nutrition')">Питание</a></li>
                <li><a href="#" onclick="showSection('progress')">Прогресс</a></li>
                <li><a href="#" onclick="showSection('timer')">Таймер</a></li>
            </ul>
        </nav>
    </header>
  <h1>User Admin Page</h1>
  
  <!-- Welcome Message for Logged-in User -->
  <div id="welcomeMessage"></div>

  <!-- Placeholder for User's Workout History -->
  <div id="workoutHistory" style="display: none;">
    <h2>Your Workout History</h2>
    <p>This is where your workout history will be displayed.</p>
    <!-- Later, you can fetch workout data from a database or local storage -->
  </div>

  <!-- Placeholder for Stats -->
  <div id="stats" style="display: none;">
    <h2>Your Workout Stats</h2>
    <p>Placeholder for stats (e.g., total workouts, calories burned, etc.).</p>
  </div>

  <!-- Logout Button -->
  <div>
    <button id="logoutBtn" style="display: none;" onclick="logoutUser()">Logout</button>
  </div>

  <!-- Status display -->
  <div id="status"></div>
</body>
</html>
